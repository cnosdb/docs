"use strict";(self.webpackChunkCnosDB=self.webpackChunkCnosDB||[]).push([[4077],{4137:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>c});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},u=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},d="mdxType",m={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},g=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),d=p(a),g=r,c=d["".concat(s,".").concat(g)]||d[g]||m[g]||l;return a?n.createElement(c,i(i({ref:e},u),{},{components:a})):n.createElement(c,i({ref:e},u))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=g;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o[d]="string"==typeof t?t:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},2742:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var n=a(7462),r=(a(7294),a(4137));const l={sidebar_position:3},i="Cluster Expansion",o={unversionedId:"manage/cluster_expansion",id:"manage/cluster_expansion",title:"Cluster Expansion",description:"Installation",source:"@site/docs/manage/cluster_expansion.md",sourceDirName:"manage",slug:"/manage/cluster_expansion",permalink:"/docs/manage/cluster_expansion",draft:!1,editUrl:"https://github.com/cnosdb/docs/docs/manage/cluster_expansion.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Upgrade",permalink:"/docs/manage/upgrade"},next:{title:"Cluster Shrink",permalink:"/docs/manage/cluster_shrink"}},s={},p=[{value:"Installation",id:"installation",level:2},{value:"<strong>Start</strong>",id:"start",level:2},{value:"<strong>Single-node startup process</strong>",id:"single-node-startup-process",level:3},{value:"<strong>Cluster Startup Process</strong>",id:"cluster-startup-process",level:3},{value:"<strong>Meta Custer Startup Process</strong>",id:"meta-custer-startup-process",level:3},{value:"<strong>Data Cluster Startup Process</strong>",id:"data-cluster-startup-process",level:4},{value:"<strong>Overview</strong>",id:"overview",level:2},{value:"Meta",id:"meta",level:3},{value:"Data",id:"data",level:3},{value:"<strong>Data Flow</strong>",id:"data-flow",level:3},{value:"<strong>Configuration</strong>",id:"configuration",level:3},{value:"Data",id:"data-1",level:3},{value:"<strong>Configuration item query</strong>",id:"configuration-item-query",level:4},{value:"Configuration storage",id:"configuration-storage",level:4},{value:"Configuration wal",id:"configuration-wal",level:4},{value:"Configuration cache",id:"configuration-cache",level:4},{value:"Configuration log",id:"configuration-log",level:4},{value:"Configuration security",id:"configuration-security",level:4},{value:"Configuration cluster",id:"configuration-cluster",level:4},{value:"Configuration hintedoff",id:"configuration-hintedoff",level:4},{value:"<strong>Operations and Maintenance Guide</strong>",id:"operations-and-maintenance-guide",level:2},{value:"<strong>Cluster maintenance (coming soon)</strong>",id:"cluster-maintenance-coming-soon",level:3}],u={toc:p},d="wrapper";function m(t){let{components:e,...l}=t;return(0,r.kt)(d,(0,n.Z)({},u,l,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"cluster-expansion"},"Cluster Expansion"),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Reference ",(0,r.kt)("a",{parentName:"p",href:"../deploy/single#source-code-installation"},"Source Code Installation"),"\u3002"),(0,r.kt)("h2",{id:"start"},(0,r.kt)("strong",{parentName:"h2"},"Start")),(0,r.kt)("p",null,"Meta Cluster is a Raft Group composed of multiple cnos-meta via Raft protocol."),(0,r.kt)("h3",{id:"single-node-startup-process"},(0,r.kt)("strong",{parentName:"h3"},"Single-node startup process")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/cnosdb-meta --id 1 --http-addr 127.0.0.1:21001\ncurl http://127.0.0.1:21001/init -d '{}'\ncurl http://127.0.0.1:21001/metrics\n./target/debug/cnosdb run --config ./config/config_31001.toml\n")),(0,r.kt)("h3",{id:"cluster-startup-process"},(0,r.kt)("strong",{parentName:"h3"},"Cluster Startup Process")),(0,r.kt)("h3",{id:"meta-custer-startup-process"},(0,r.kt)("strong",{parentName:"h3"},"Meta Custer Startup Process")),(0,r.kt)("p",null,"Start meta-1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/cnosdb-meta --id 1 --http-addr 127.0.0.1:21001\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Start meta-2")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/cnosdb-meta --id 2 --http-addr 127.0.0.1:21002\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Start meta-3")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/cnosdb-meta --id 3 --http-addr 127.0.0.1:21003\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Initialize meta")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'curl http://127.0.0.1:21001/init -d \'{}\'\ncurl http://127.0.0.1:21001/add-learner -H "Content-Type: application/json" -d \'[2, "127.0.0.1:21002"]\'\ncurl http://127.0.0.1:21001/add-learner -H "Content-Type: application/json" -d \'[3, "127.0.0.1:21003"]\'\ncurl http://127.0.0.1:21001/change-membership -H "Content-Type: application/json" -d \'[1, 2, 3]\'\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"View meta cluster status")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"curl http://127.0.0.1:21001/metrics\ncurl http://127.0.0.1:21002/metrics\ncurl http://127.0.0.1:21003/metrics\n")),(0,r.kt)("h4",{id:"data-cluster-startup-process"},(0,r.kt)("strong",{parentName:"h4"},"Data Cluster Startup Process")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Start data-1")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/cnosdb run --config ./config/config_31001.toml\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Start data-2")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./target/debug/cnosdb run --config ./config/config_32001.toml\n")),(0,r.kt)("h2",{id:"overview"},(0,r.kt)("strong",{parentName:"h2"},"Overview")),(0,r.kt)("p",null,"In the CnosDB cluster version, individual running instances are called Nodes, and each Node is divided into two roles: Meta and Data."),(0,r.kt)("h3",{id:"meta"},"Meta"),(0,r.kt)("p",null,"Meta maintains cluster metadata, such as Table Schema, Node survival heartbeat and load data, Vnode to Node mapping relationships, etc."),(0,r.kt)("p",null,"Metadata is frequently accessed by each Node, and CnosDB chooses to maintain a strongly consistent Meta Node cluster, where Nodes subscribe to the Meta Node to pull information of interest, and all updates to metadata information are made through the Meta Node cluster.\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(5811).Z,width:"1324",height:"1114"})),(0,r.kt)("h3",{id:"data"},"Data"),(0,r.kt)("p",null,"Provides TCP Service to accept query and write requests distributed by Coodinator, which are similar to the standalone version."),(0,r.kt)("h3",{id:"data-flow"},(0,r.kt)("strong",{parentName:"h3"},"Data Flow")),(0,r.kt)("p",null,(0,r.kt)("img",{src:a(4704).Z,width:"3079",height:"2524"})),(0,r.kt)("h3",{id:"configuration"},(0,r.kt)("strong",{parentName:"h3"},"Configuration")),(0,r.kt)("h3",{id:"data-1"},"Data"),(0,r.kt)("p",null,"The following describes the configuration file of CnosDB Cluster Edition"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-toml"},"[query]\nmax_server_connections = 10240\nquery_sql_limit = 16777216 # 16 * 1024 * 1024\nwrite_sql_limit = 167772160 # 160 * 1024 * 1024\nauth_enabled = false\n\n[storage]\npath = 'data/db'\nmax_summary_size = 134217728 # 128 * 1024 * 1024\nmax_level = 4\nbase_file_size = 16777216 # 16 * 1024 * 1024\ncompact_trigger = 4\nmax_compact_size = 2147483648 # 2 * 1024 * 1024 * 1024\nstrict_write = false\n\n[wal]\nenabled = true\npath = 'data/wal'\nsync = false\n\n[cache]\nmax_buffer_size = 134217728 # 128 * 1024 * 1024\nmax_immutable_number = 4\n\n[log]\nlevel = 'info'\npath = 'data/log'\n\n[security]\n# [security.tls_config]\n# certificate = \"./config/tls/server.crt\"\n# private_key = \"./config/tls/server.key\"\n\n[cluster]\nnode_id = 100\nname = 'cluster_xxx'\nmeta = '127.0.0.1:21001'\n\nflight_rpc_server = '127.0.0.1:31006'\nhttp_server = '127.0.0.1:31007'\ngrpc_server = '127.0.0.1:31008'\ntcp_server = '127.0.0.1:31009'\n\n[hintedoff]\nenable = true\npath = '/tmp/cnosdb/hh'\n")),(0,r.kt)("h4",{id:"configuration-item-query"},(0,r.kt)("strong",{parentName:"h4"},"Configuration item query")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"max_server_connections"),(0,r.kt)("td",{parentName:"tr",align:null},"10240"),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum number of simultaneous SQL executions")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"query_sql_limit"),(0,r.kt)("td",{parentName:"tr",align:null},"16777216"),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum length of SQL (bytes)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"auth_enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to check the identity information of each query request, when set to true, the execution of SQL will check whether the user has the corresponding permission.")))),(0,r.kt)("h4",{id:"configuration-storage"},"Configuration storage"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"path"),(0,r.kt)("td",{parentName:"tr",align:null},"data/db"),(0,r.kt)("td",{parentName:"tr",align:null},"Database file storage path")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"max_summary_size"),(0,r.kt)("td",{parentName:"tr",align:null},"134217728"),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum size (in bytes) of a single database summary file, create a new summary file when the size is reached")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"max_level"),(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum hierarchy of database files")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"base_file_size"),(0,r.kt)("td",{parentName:"tr",align:null},"16777216"),(0,r.kt)("td",{parentName:"tr",align:null},"Database file size (bytes)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"compact_trigger"),(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"When the number of files in level 0 is reached, the compression task is started and the files are merged into a higher level")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"max_compact_size"),(0,r.kt)("td",{parentName:"tr",align:null},"2147483648"),(0,r.kt)("td",{parentName:"tr",align:null},"Total maximum selected file size per compaction job (bytes)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"strict_write"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to ensure that each write request strictly conforms to the Table's Schema; when set to true, write requests are not checked for Schema conformance")))),(0,r.kt)("h4",{id:"configuration-wal"},"Configuration wal"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to enable WAL for disaster recovery support, when set to ture, write requests will be written to the WAL file first")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"path"),(0,r.kt)("td",{parentName:"tr",align:null},"data/wal"),(0,r.kt)("td",{parentName:"tr",align:null},"WAL file directory")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sync"),(0,r.kt)("td",{parentName:"tr",align:null},"false"),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to ensure that every WAL write request is flushed to disk")))),(0,r.kt)("h4",{id:"configuration-cache"},"Configuration cache"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"max_buffer_size"),(0,r.kt)("td",{parentName:"tr",align:null},"134217728"),(0,r.kt)("td",{parentName:"tr",align:null},"Maximum writable size (in bytes) per active cache in a single Vnode")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"max_immutable_number"),(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"The maximum number of inactive caches in a single Vnode, and when the number is reached, the inactive cache is written to disk")))),(0,r.kt)("h4",{id:"configuration-log"},"Configuration log"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"level"),(0,r.kt)("td",{parentName:"tr",align:null},"info"),(0,r.kt)("td",{parentName:"tr",align:null},"Logging level, optionally  trace \\ ")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"path"),(0,r.kt)("td",{parentName:"tr",align:null},"data/log"),(0,r.kt)("td",{parentName:"tr",align:null},"Log file directory")))),(0,r.kt)("h4",{id:"configuration-security"},"Configuration security"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"security.tls_confg")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"certificate"),(0,r.kt)("td",{parentName:"tr",align:null},"data/tls/server.crt"),(0,r.kt)("td",{parentName:"tr",align:null},"data/tls/server.crt")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"private_key"),(0,r.kt)("td",{parentName:"tr",align:null},"data/tls/server.key"),(0,r.kt)("td",{parentName:"tr",align:null},"data/tls/server.key")))),(0,r.kt)("h4",{id:"configuration-cluster"},"Configuration cluster"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"node_id"),(0,r.kt)("td",{parentName:"tr",align:null},"100"),(0,r.kt)("td",{parentName:"tr",align:null},"Data Node ID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"cluster_xxx"),(0,r.kt)("td",{parentName:"tr",align:null},"Data Node Name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"meta"),(0,r.kt)("td",{parentName:"tr",align:null},"127.0.0.1:21001"),(0,r.kt)("td",{parentName:"tr",align:null},"Meta Node Address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"flight_rpc_server"),(0,r.kt)("td",{parentName:"tr",align:null},"127.0.0.1:31006"),(0,r.kt)("td",{parentName:"tr",align:null},"Flight RPC Service Listening Address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"http_server"),(0,r.kt)("td",{parentName:"tr",align:null},"127.0.0.1:31007"),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP Service Listening Address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"grpc_server"),(0,r.kt)("td",{parentName:"tr",align:null},"127.0.0.1:31008"),(0,r.kt)("td",{parentName:"tr",align:null},"GRPC Service Listening Address")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tcp_server"),(0,r.kt)("td",{parentName:"tr",align:null},"127.0.0.1:31009"),(0,r.kt)("td",{parentName:"tr",align:null},"TCP Service Listening Address")))),(0,r.kt)("h4",{id:"configuration-hintedoff"},"Configuration hintedoff"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Configuration items")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Default Value")),(0,r.kt)("th",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"th"},"Description")))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"enable"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"Whether to enable Hinted Off for consistency support, when set to true, failed write requests will automatically enter the hinted-off queue and be retried automatically")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"path"),(0,r.kt)("td",{parentName:"tr",align:null},"data/hh"),(0,r.kt)("td",{parentName:"tr",align:null},"Hinted Off persistent directory")))),(0,r.kt)("h2",{id:"operations-and-maintenance-guide"},(0,r.kt)("strong",{parentName:"h2"},"Operations and Maintenance Guide")),(0,r.kt)("h3",{id:"cluster-maintenance-coming-soon"},(0,r.kt)("strong",{parentName:"h3"},"Cluster maintenance (coming soon)")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Transferring Vnode")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"MOVE VNODE [vnode_id] TO NODE [node_id]\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Copy Vnode")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"COPY VNODE [vnode_id] TO NODE [node_id]\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Delete Vnode")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"DROP VNODE <vnode_id>\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Compression Vnode")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"COMPACT VNODE <vnode_id>[, <vnode_id>[, ...]]\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Checking Group Data Consistency")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"CHECKSUM GROUP <replication_set_id>\n")))}m.isMDXComponent=!0},4704:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/cluster_data_flow-2e36ba1dd32dbee181bad6834abf2429.jpg"},5811:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/cluster_metas-8e23c314bde425f7e1cb908e96b2cef0.jpg"}}]);