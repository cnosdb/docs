{
  "version": 3,
  "sources": ["../../../../node_modules/vuepress-plugin-comment2/src/client/components/Waline.ts", "dep:@CommentProvider"],
  "sourcesContent": ["import { usePageFrontmatter, usePageLang, withBase } from \"@vuepress/client\";\nimport { Waline } from \"@waline/client/dist/component.mjs\";\nimport { pageviewCount } from \"@waline/client/dist/pageview.mjs\";\nimport { computed, defineComponent, h, onMounted, watch } from \"vue\";\nimport { useRoute } from \"vue-router\";\nimport { useLocaleConfig } from \"vuepress-shared/lib/client\";\n\nimport type { VNode } from \"vue\";\nimport type {\n  CommentPluginFrontmatter,\n  WalineLocaleConfig,\n  WalineOptions,\n} from \"../../shared/index.js\";\n\nimport \"@waline/client/dist/waline.css\";\nimport \"../styles/waline.scss\";\n\ndeclare const COMMENT_OPTIONS: WalineOptions;\n\ndeclare const WALINE_META: boolean;\ndeclare const WALINE_LOCALES: WalineLocaleConfig;\n\nconst walineOption = COMMENT_OPTIONS;\nconst walineLocales = WALINE_LOCALES;\nconst enableWaline = Boolean(walineOption.serverURL);\n\nif (WALINE_META) import(\"@waline/client/dist/waline-meta.css\");\n\nexport default defineComponent({\n  name: \"WalineComment\",\n\n  setup() {\n    const route = useRoute();\n    const frontmatter = usePageFrontmatter<CommentPluginFrontmatter>();\n    const lang = usePageLang();\n    const walineLocale = useLocaleConfig(walineLocales);\n\n    let abort: () => void;\n\n    const enableComment = computed(() => {\n      if (!enableWaline) return false;\n      const pluginConfig = walineOption.comment !== false;\n      const pageConfig = frontmatter.value.comment;\n\n      return (\n        // Enable in page\n        Boolean(pageConfig) ||\n        // not disabled in anywhere\n        (pluginConfig !== false && pageConfig !== false)\n      );\n    });\n\n    const enablePageViews = computed(() => {\n      if (!enableWaline) return false;\n      const pluginConfig = walineOption.pageview !== false;\n      const pageConfig = frontmatter.value.pageview;\n\n      return (\n        // Enable in page\n        Boolean(pageConfig) ||\n        // not disabled in anywhere\n        (pluginConfig !== false && pageConfig !== false)\n      );\n    });\n\n    const walineProps = computed(() => ({\n      lang: lang.value === \"zh-CN\" ? \"zh-CN\" : \"en\",\n      locale: {\n        ...walineLocale.value,\n        ...(walineOption.locale || {}),\n      },\n      emoji: [\n        \"//unpkg.com/@waline/emojis@1.1.0/weibo\",\n        \"//unpkg.com/@waline/emojis@1.1.0/bilibili\",\n      ],\n      dark: \"html.dark\",\n      ...walineOption,\n      path: withBase(route.path),\n    }));\n\n    onMounted(() => {\n      watch(\n        () => route.path,\n        () => {\n          abort?.();\n\n          if (enablePageViews.value)\n            setTimeout(() => {\n              abort = pageviewCount({\n                serverURL: walineOption.serverURL,\n                path: withBase(route.path),\n              });\n            }, walineOption.delay || 500);\n        },\n        { immediate: true }\n      );\n    });\n\n    return (): VNode | null =>\n      enableComment.value\n        ? h(\n            \"div\",\n            { class: \"waline-wrapper\" },\n            enableWaline ? h(Waline, walineProps.value) : []\n          )\n        : null;\n  },\n});\n", "import d from \"../../../../node_modules/vuepress-plugin-comment2/lib/client/components/Waline.js\";export default d;"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,IAAMA,IAAe;AAArB,IACMC,IAAgB;AADtB,IAEMC,IAAe,QAAQF,EAAa,SAAS;AAE/C,eAAa,OAAO;AAExB,IAAeG,IAAAA,gBAAgB,EAC7B,MAAM,iBAEN,QAAQ;AACN,QAAMC,IAAQC,SAAAA,GACRC,QAAcC,eAAAA,oBAAAA,GACdC,QAAOC,eAAAA,aAAY,GACnBC,IAAeC,GAAgBV,CAAa;AAElD,MAAIW;AAEJ,QAAMC,IAAgBC,SAAS,MAAM;AACnC,QAAI,CAACZ;AAAc,aAAO;AAC1B,UAAMa,IAAef,EAAa,YAAY,OACxCgB,IAAaV,EAAY,MAAM;AAErC,WAEE,QAAQU,CAAU,KAEjBD,MAAiB,SAASC,MAAe;EAE9C,CAAC,GAEKC,IAAkBH,SAAS,MAAM;AACrC,QAAI,CAACZ;AAAc,aAAO;AAC1B,UAAMa,IAAef,EAAa,aAAa,OACzCgB,IAAaV,EAAY,MAAM;AAErC,WAEE,QAAQU,CAAU,KAEjBD,MAAiB,SAASC,MAAe;EAE9C,CAAC,GAEKE,IAAcJ,SAAS,OAAO,EAClC,MAAMN,EAAK,UAAU,UAAU,UAAU,MACzC,QAAQ,EACN,GAAGE,EAAa,OAChB,GAAIV,EAAa,UAAU,CAC7B,EAAA,GACA,OAAO,CACL,0CACA,2CACF,GACA,MAAM,aACN,GAAGA,GACH,UAAMmB,eAAAA,UAASf,EAAM,IAAI,EAC3B,EAAE;AAEF,SAAAgB,UAAU,MAAM;AACdC,UACE,MAAMjB,EAAM,MACZ,MAAM;AACJQ,WAAA,QAAAA,EAAAA,GAEIK,EAAgB,SAClB,WAAW,MAAM;AACfL,YAAQU,EAAc,EACpB,WAAWtB,EAAa,WACxB,UAAMmB,eAAAA,UAASf,EAAM,IAAI,EAC3B,CAAC;MACH,GAAGJ,EAAa,SAAS,GAAG;IAChC,GACA,EAAE,WAAW,KAAK,CACpB;EACF,CAAC,GAEM,MACLa,EAAc,QACVU,EACE,OACA,EAAE,OAAO,iBAAiB,GAC1BrB,IAAeqB,EAAEC,GAAQN,EAAY,KAAK,IAAI,CAChD,CAAA,IACA;AACR,EACF,CAAC;;;AC3GiG,IAAO,0BAAQ;",
  "names": ["walineOption", "walineLocales", "enableWaline", "defineComponent", "route", "useRoute", "frontmatter", "usePageFrontmatter", "lang", "usePageLang", "walineLocale", "useLocaleConfig", "abort", "enableComment", "computed", "pluginConfig", "pageConfig", "enablePageViews", "walineProps", "withBase", "onMounted", "watch", "pageviewCount", "h", "Waline"]
}
